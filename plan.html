<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Forge & Fit ‚Äì Plan personnalis√©</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Quiz Forge & Fit : r√©ponds aux questions et re√ßois un plan d'entra√Ænement et de nutrition ultra complet, structur√© comme un magazine.">
  <link rel="stylesheet" href="style.css">

  <!-- jsPDF pour le t√©l√©chargement PDF -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

  <style>
    .step { display: none; }
    .active { display: block; }

    .pill {
      padding: 10px 14px;
      margin: 5px;
      border: 1px solid #444;
      border-radius: 999px;
      cursor: pointer;
      display: inline-block;
      font-size: 14px;
      background: #101018;
    }
    .pill.selected {
      background: #ff3131;
      color: white;
      border-color: #ff3131;
    }

    .card {
      padding: 15px;
      margin-top: 15px;
      border: 1px solid #333;
      border-radius: 10px;
      background: #101018;
    }

    .plan-section {
      background: #101018;
      border-radius: 12px;
      border: 1px solid #262636;
      padding: 16px 18px;
      margin-bottom: 14px;
    }

    .plan-section h3 {
      margin-top: 0;
      margin-bottom: 8px;
      font-size: 18px;
    }

    .plan-section h4 {
      margin-bottom: 6px;
      margin-top: 10px;
      font-size: 15px;
    }

    #btn-pdf {
      margin-top: 12px;
      display: none;
    }

    #progress {
      font-size: 13px;
      opacity: 0.8;
      margin-bottom: 8px;
    }
  </style>
</head>

<body>

<header>PLAN PERSONNALIS√â</header>

<nav>
  <a href="index.html">Accueil</a>
  <a href="prise-masse.html">Prise de masse</a>
  <a href="perte-gras.html">Perte de gras</a>
  <a href="exercices.html">Exercices</a>
  <a href="plan.html">Plan personnalis√©</a>
</nav>

<section>
  <h2>Quiz Forge & Fit ‚Äì Plan ultra complet</h2>

  <div class="card">
    <p>R√©ponds aux questions ci-dessous. √Ä la fin, Forge & Fit g√©n√®re pour toi un <b>plan structur√© type magazine :</b> profil, programme 4 semaines, nutrition, cardio, r√©cup√©ration, pr√™t √† √™tre t√©l√©charg√© en PDF.</p>
    <p id="progress">√âtape 1 / 7</p>
  </div>

  <!-- √âTAPE 1 -->
  <div class="step active" data-step="1">
    <h3>1. Quel est ton objectif principal ?</h3>
    <div id="objectif-pills">
      <span class="pill" data-value="prise">üí™ Prise de masse</span>
      <span class="pill" data-value="perte">üî• Perte de gras</span>
      <span class="pill" data-value="recomp">‚ö° Recomposition (un peu de muscle + perte de gras)</span>
    </div>
    <input type="hidden" id="objectif">
  </div>

  <!-- √âTAPE 2 -->
  <div class="step" data-step="2">
    <h3>2. Ton niveau actuel ?</h3>
    <div id="niveau-pills">
      <span class="pill" data-value="debutant">üü¢ D√©butant</span>
      <span class="pill" data-value="intermediaire">üü° Interm√©diaire</span>
      <span class="pill" data-value="avance">üî¥ Avanc√©</span>
    </div>
    <input type="hidden" id="niveau">
  </div>

  <!-- √âTAPE 3 -->
  <div class="step" data-step="3">
    <h3>3. Combien de jours par semaine peux-tu t'entra√Æner ?</h3>
    <div id="jours-pills">
      <span class="pill" data-value="3">3 jours</span>
      <span class="pill" data-value="4">4 jours</span>
      <span class="pill" data-value="5">5 jours</span>
      <span class="pill" data-value="6">6 jours</span>
    </div>
    <input type="hidden" id="jours">
  </div>

  <!-- √âTAPE 4 -->
  <div class="step" data-step="4">
    <h3>4. Quel mat√©riel as-tu ?</h3>
    <p>(Tu peux choisir plusieurs options)</p>
    <div id="materiel-pills">
      <span class="pill" data-value="salle">üèãÔ∏è Salle de musculation</span>
      <span class="pill" data-value="halteres">üèãÔ∏è Halt√®res</span>
      <span class="pill" data-value="barre">ü¶æ Barre + poids</span>
      <span class="pill" data-value="poids-corps">ü§∏ Poids du corps</span>
      <span class="pill" data-value="elastiques">üßµ √âlastiques</span>
    </div>
  </div>

  <!-- √âTAPE 5 -->
  <div class="step" data-step="5">
    <h3>5. Ton √¢ge (ans) ?</h3>
    <input type="number" id="age" placeholder="Ex: 18" min="13" max="80">
  </div>

  <!-- √âTAPE 6 -->
  <div class="step" data-step="6">
    <h3>6. Ton poids (kg) ?</h3>
    <input type="number" id="poids" placeholder="Ex: 70" min="30" max="250">
  </div>

  <!-- √âTAPE 7 -->
  <div class="step" data-step="7">
    <h3>7. Ta taille (cm) ?</h3>
    <input type="number" id="taille" placeholder="Ex: 175" min="130" max="220">
  </div>

  <!-- BOUTONS -->
  <div style="margin-top: 20px;">
    <button onclick="prevStep()" id="btn-prev" style="display:none;">‚¨ÖÔ∏è Pr√©c√©dent</button>
    <button onclick="nextStep()" id="btn-next">Suivant ‚û°Ô∏è</button>
  </div>

  <br><br>

  <div id="resultat"></div>
  <button id="btn-pdf" onclick="downloadPDF()">üìÑ T√©l√©charger mon plan en PDF</button>

</section>

<footer>Forge & Fit ¬© 2025 ‚Äî Plan g√©n√©r√© automatiquement, √† adapter √† ta sant√© r√©elle.</footer>

<script>
let currentStep = 1;
const totalSteps = 7;

// rendre les pills cliquables
document.querySelectorAll('.pill').forEach(pill => {
  pill.addEventListener('click', () => {
    const group = pill.parentElement;

    if (group.id === 'materiel-pills') {
      // multi s√©lection pour mat√©riel
      pill.classList.toggle('selected');
    } else {
      // simple s√©lection
      group.querySelectorAll('.pill').forEach(p => p.classList.remove('selected'));
      pill.classList.add('selected');
      const hidden = group.nextElementSibling;
      if (hidden && hidden.tagName === 'INPUT') {
        hidden.value = pill.dataset.value;
      }
    }
  });
});

function showStep(step) {
  document.querySelectorAll('.step').forEach(s => s.classList.remove('active'));
  const el = document.querySelector('.step[data-step="' + step + '"]');
  if (el) el.classList.add('active');

  document.getElementById("progress").textContent = "√âtape " + step + " / " + totalSteps;
  document.getElementById("btn-prev").style.display = step === 1 ? "none" : "inline-block";
  document.getElementById("btn-next").textContent = step === totalSteps ? "G√©n√©rer mon plan" : "Suivant ‚û°Ô∏è";
}

function nextStep() {
  if (currentStep < totalSteps) {
    currentStep++;
    showStep(currentStep);
  } else {
    genererPlan();
  }
}

function prevStep() {
  if (currentStep > 1) {
    currentStep--;
    showStep(currentStep);
  }
}

showStep(currentStep);

// g√©n√©ration du plan "magazine"
function genererPlan() {
  const objectif = document.getElementById('objectif').value || 'prise';
  const niveau = document.getElementById('niveau').value || 'debutant';
  const jours = Number(document.getElementById('jours').value || 3);
  const age = Number(document.getElementById('age').value || 18);
  const poids = Number(document.getElementById('poids').value || 70);
  const taille = Number(document.getElementById('taille').value || 175);

  // mat√©riel s√©lectionn√©
  const materiels = [];
  document.querySelectorAll('#materiel-pills .pill.selected').forEach(p => materiels.push(p.dataset.value));
  const matText = materiels.length ? materiels.join(', ') : 'Poids du corps / basique';

  // IMC
  const tailleM = taille / 100;
  const imc = (poids / (tailleM * tailleM)).toFixed(1);

  // calories maintenance + objectif
  let maintenance = poids * 30;
  let calories;
  if (objectif === 'prise') calories = maintenance + 300;
  else if (objectif === 'perte') calories = maintenance - 400;
  else calories = maintenance;

  const proteines = Math.round(poids * 2); // g
  const lipides = Math.round(poids * 0.8); // g
  const resteKcal = calories - (proteines * 4 + lipides * 9);
  const glucides = Math.max(0, Math.round(resteKcal / 4));

  // textes lisibles
  const objectifTxt =
    objectif === 'prise' ? 'Prise de masse' :
    objectif === 'perte' ? 'Perte de gras' :
    'Recomposition (muscle + perte de gras)';

  const niveauTxt =
    niveau === 'debutant' ? 'D√©butant' :
    niveau === 'intermediaire' ? 'Interm√©diaire' : 'Avanc√©';

  // structure de split
  let splitTxt = '';
  if (jours <= 3) {
    splitTxt = "Full-body " + jours + "x / semaine (tout le corps √† chaque s√©ance).";
  } else if (jours === 4) {
    splitTxt = "Split Haut / Bas : 2 jours haut du corps, 2 jours bas du corps.";
  } else {
    splitTxt = "Split complet de " + jours + " jours (Pecs/Dos/Jambes/√âpaules/Bras + rappels/cardio).";
  }

  // exemple de semaine
  let semaineHtml = '';
  if (objectif === 'prise') {
    semaineHtml += "<h4>Semaine type ‚Äì Prise de masse</h4>";
    if (jours === 3) {
      semaineHtml += "Jour 1 : Full-body lourd (pousser / tirer / jambes)<br>";
      semaineHtml += "Jour 2 : Full-body mod√©r√© + focus technique<br>";
      semaineHtml += "Jour 3 : Full-body intensif + fin de s√©ance bras / √©paules<br>";
    } else if (jours === 4) {
      semaineHtml += "Jour 1 : Haut du corps (Pecs / Dos / Bras)<br>";
      semaineHtml += "Jour 2 : Bas du corps (Jambes / Fessiers / Mollets)<br>";
      semaineHtml += "Jour 3 : Haut du corps (√âpaules / Dos / Bras)<br>";
      semaineHtml += "Jour 4 : Jambes + Abdos + mollets<br>";
    } else {
      semaineHtml += "Jour 1 : Pecs / Triceps<br>";
      semaineHtml += "Jour 2 : Dos / Biceps<br>";
      semaineHtml += "Jour 3 : Jambes / Abdos<br>";
      semaineHtml += "Jour 4 : √âpaules / Rappels Pecs<br>";
      if (jours >= 5) semaineHtml += "Jour 5 : Full-body lourd / mouvements de base<br>";
      if (jours === 6) semaineHtml += "Jour 6 : Cardio + mobilit√© / travail l√©ger<br>";
    }
  } else {
    semaineHtml += "<h4>Semaine type ‚Äì Perte de gras / Recomp</h4>";
    semaineHtml += "Jour 1 : Full-body (mouvements lourds) + 10‚Äì15 min cardio<br>";
    semaineHtml += "Jour 2 : Cardio/HIIT (sprints, corde √† sauter, v√©lo) 15‚Äì25 min<br>";
    semaineHtml += "Jour 3 : Full-body + travail core / abdos<br>";
    if (jours >= 4) semaineHtml += "Jour 4 : Full-body volume + marche rapide 30‚Äì45 min<br>";
    if (jours >= 5) semaineHtml += "Jour 5 : S√©ance l√©g√®re + mobilit√©<br>";
    if (jours === 6) semaineHtml += "Jour 6 : Marche longue / faible intensit√© 45‚Äì60 min<br>";
  }

  // exemple de s√©ance
  let seanceHtml = '';
  seanceHtml += "<h4>Exemple de s√©ance type</h4>";
  if (objectif === 'prise') {
    seanceHtml += "- 1) Mouvement de base lourd (Squat, D√©velopp√© couch√©, Soulev√© de terre, Tractions...) : 4 s√©ries de 6‚Äì8 reps<br>";
    seanceHtml += "- 2) Mouvement secondaire : 3‚Äì4 s√©ries de 8‚Äì12 reps<br>";
    seanceHtml += "- 3) Isolation (biceps, triceps, √©paules, fessiers) : 3 s√©ries de 10‚Äì15 reps<br>";
    seanceHtml += "- 4) Core / abdos : 2‚Äì3 s√©ries (gainage, crunch, relev√©s de jambes)<br>";
    seanceHtml += "- Repos entre s√©ries lourdes : 90‚Äì150 sec / Isolation : 60‚Äì90 sec<br>";
  } else {
    seanceHtml += "- 1) Circuit de 3‚Äì4 exercices (Squat, Pompes, Rowing, Crunch) r√©p√©t√© 3‚Äì5 fois<br>";
    seanceHtml += "- 2) Cardio : 10‚Äì20 min (v√©lo, marche rapide, rameur)<br>";
    seanceHtml += "- 3) Finir par 5‚Äì10 min d‚Äô√©tirements / mobilit√©<br>";
  }

  // nutrition
  let nutritionHtml = '';
  nutritionHtml += "<b>Calories cibles :</b> ~" + Math.round(calories) + " kcal / jour<br>";
  nutritionHtml += "<b>Macros approximatives :</b><br>";
  nutritionHtml += "- Prot√©ines : " + proteines + " g / jour<br>";
  nutritionHtml += "- Glucides : " + glucides + " g / jour<br>";
  nutritionHtml += "- Lipides : " + lipides + " g / jour<br><br>";
  nutritionHtml += "<b>Exemple de journ√©e :</b><br>";
  nutritionHtml += "- Petit-d√©jeuner : flocons d‚Äôavoine + yaourt grec ou ≈ìufs + fruit<br>";
  nutritionHtml += "- D√©jeuner : poulet / poisson + riz ou p√¢tes compl√®tes + l√©gumes<br>";
  nutritionHtml += "- Collation : fromage blanc ou shake prot√©in√© + fruit + ol√©agineux<br>";
  nutritionHtml += "- D√Æner : source de prot√©ines (≈ìufs, tofu, poisson...) + l√©gumes + un peu de glucides selon l‚Äôhoraire d‚Äôentra√Ænement<br>";

  // cardio & r√©cup√©ration
  let cardioHtml = '';
  cardioHtml += "<b>Cardio recommand√© :</b><br>";
  if (objectif === 'perte' || objectif === 'recomp') {
    cardioHtml += "- 2 √† 4 s√©ances de cardio / semaine : mix HIIT + cardio mod√©r√©<br>";
  } else {
    cardioHtml += "- 1 √† 2 s√©ances de cardio l√©ger pour la sant√© (marche, v√©lo)<br>";
  }
  cardioHtml += "<br><b>R√©cup√©ration :</b><br>";
  cardioHtml += "- Sommeil : viser 7‚Äì9 heures par nuit<br>";
  cardioHtml += "- Hydratation : 2‚Äì3L d‚Äôeau / jour<br>";
  cardioHtml += "- √âtirements ou mobilit√© : 2‚Äì3 s√©ances / semaine<br>";
  cardioHtml += "- √âcouter les douleurs articulaires, adapter les charges<br>";

  const resultat = `
    <div class="plan-section">
      <h3>üìå Profil Forge & Fit</h3>
      <p><b>√Çge :</b> ${age} ans ‚Äì <b>Poids :</b> ${poids} kg ‚Äì <b>Taille :</b> ${taille} cm ‚Äì <b>IMC approx :</b> ${imc}</p>
      <p><b>Objectif :</b> ${objectifTxt}</p>
      <p><b>Niveau :</b> ${niveauTxt}</p>
      <p><b>Jours d'entra√Ænement :</b> ${jours} / semaine</p>
      <p><b>Mat√©riel :</b> ${matText}</p>
    </div>

    <div class="plan-section">
      <h3>üèãÔ∏è Programme d'entra√Ænement (4 semaines)</h3>
      <p><b>Structure g√©n√©rale :</b> ${splitTxt}</p>
      ${semaineHtml}
      ${seanceHtml}
      <p style="font-size:12px;opacity:0.7;margin-top:6px;">‚ûú Astuce : note tes charges chaque semaine et cherche √† progresser petit √† petit.</p>
    </div>

    <div class="plan-section">
      <h3>üçΩÔ∏è Nutrition personnalis√©e</h3>
      ${nutritionHtml}
      <p style="font-size:12px;opacity:0.7;margin-top:6px;">‚ûú Ceci est une base intelligente, pas un plan m√©dical. Ajuste avec ton ressenti, ton √©nergie et ton miroir.</p>
    </div>

    <div class="plan-section">
      <h3>‚ù§Ô∏è Cardio & r√©cup√©ration</h3>
      ${cardioHtml}
      <p style="font-size:12px;opacity:0.7;margin-top:6px;">‚ûú Sans r√©cup√©ration, il n‚Äôy a pas de progression. Tu ne te construis pas seulement √† la salle, mais aussi en dehors.</p>
    </div>
  `;

  document.getElementById("resultat").innerHTML = resultat;
  document.getElementById("btn-pdf").style.display = "inline-block";

  // scroll vers le plan
  window.scrollTo({ top: document.getElementById("resultat").offsetTop - 20, behavior: "smooth" });
}

function downloadPDF() {
  const { jsPDF } = window.jspdf;
  const doc = new jsPDF({ unit: "mm", format: "a4" });

  const text = document.getElementById("resultat").innerText;
  const lines = doc.splitTextToSize(text, 180);
  doc.text(lines, 10, 10);
  doc.save("Plan_Forge_And_Fit.pdf");
}
</script>

</body>
</html>

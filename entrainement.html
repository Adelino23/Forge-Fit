<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>SÃ©ance â€“ Forge & Fit</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
</head>

<body>

<!-- NAVIGATION -->
<nav>
  <div class="nav-scroll">
    <a href="index.html">Accueil</a>
    <a href="prise-masse.html">Prise de masse</a>
    <a href="perte-gras.html">Perte de gras</a>
    <a href="exercices.html">Exercices</a>
    <a href="entrainement.html">SÃ©ance</a>
    <a href="plan.html">Plan perso</a>
    <a href="compte.html">Compte</a>
  </div>
</nav>

<div class="page">

  <header class="hero">
    <div class="hero-kicker">Mode sÃ©ance</div>
    <h1 class="hero-title">SÃ©ance guidÃ©e Forge & Fit</h1>
    <p class="hero-sub">
      Choisis une catÃ©gorie, rÃ¨gle ta durÃ©e et le nombre de tours. Timer, GIF et enchaÃ®nement automatique comme une vraie app.
    </p>
  </header>

  <section class="card">
    <h2>1. Choisis ta catÃ©gorie</h2>
    <p>Tu peux enchaÃ®ner tous les exercices dâ€™un groupe musculaire.</p>

    <div style="display:flex; flex-wrap:wrap; gap:8px; margin-top:10px;">
      <button class="btn btn-ghost" onclick="choose('fullbody')">ğŸ”¥ Full Body</button>
      <button class="btn btn-ghost" onclick="choose('pecs')">ğŸ’ª Pecs</button>
      <button class="btn btn-ghost" onclick="choose('dos')">ğŸ”µ Dos</button>
      <button class="btn btn-ghost" onclick="choose('jambes')">ğŸ¦µ Jambes</button>
      <button class="btn btn-ghost" onclick="choose('epaules')">ğŸŸ¡ Ã‰paules</button>
      <button class="btn btn-ghost" onclick="choose('bras')">ğŸŸ£ Bras</button>
      <button class="btn btn-ghost" onclick="choose('abdos')">ğŸŸ  Abdos</button>
      <button class="btn btn-ghost" onclick="choose('hiit')">âš¡ HIIT</button>
      <button class="btn btn-ghost" onclick="choose('cardio')">ğŸƒ Cardio</button>
      <button class="btn btn-ghost" onclick="choose('echauff')">ğŸ”¥ Ã‰chauffement</button>
      <button class="btn btn-ghost" onclick="choose('stretch')">ğŸ§˜ Stretching</button>
      <button class="btn btn-ghost" onclick="choose('gainage')">ğŸ§± Gainage</button>
      <button class="btn btn-ghost" onclick="choose('fessiers')">ğŸ‘ Fessiers</button>
    </div>
  </section>

  <section class="card">
    <h2>2. RÃ©glages de ta sÃ©ance</h2>

    <div class="form-row">
      <label>DurÃ©e par exercice</label>
      <select id="duration-select" onchange="updateDuration()">
        <option value="">Par dÃ©faut (30 secondes)</option>
        <option value="15">15 secondes</option>
        <option value="20">20 secondes</option>
        <option value="30">30 secondes</option>
        <option value="40">40 secondes</option>
        <option value="45">45 secondes</option>
        <option value="60">60 secondes</option>
      </select>
    </div>

    <div class="form-row" style="margin-top:10px;">
      <label>Nombre de tours (rounds)</label>
      <select id="rounds-select" onchange="updateRounds()">
        <option value="1">1 tour</option>
        <option value="2">2 tours</option>
        <option value="3">3 tours</option>
        <option value="4">4 tours</option>
      </select>
    </div>

    <p style="font-size:12px; color:#9ca3af; margin-top:8px;">
      Tu peux changer ces rÃ©glages avant ou pendant la sÃ©ance, ils sâ€™appliquent au prochain exercice.
    </p>
  </section>

  <section class="card">
    <h2>3. SÃ©ance en cours</h2>

    <p id="session-status" style="font-size:13px; color:#9ca3af;">
      Choisis une catÃ©gorie pour prÃ©parer ta sÃ©ance.
    </p>

    <div class="timer-label" style="text-align:center; font-size:11px; text-transform:uppercase; letter-spacing:.16em; margin-top:6px; color:#9ca3af;">
      Temps restant
    </div>
    <div class="timer-big" id="timer">00:00</div>

    <div id="exercise-info" style="margin-top:8px;">
      <div class="exercise-name" id="exercise-name" style="text-align:center; font-size:18px; font-weight:600;"></div>
      <div class="exercise-muscle" id="muscle-group" style="text-align:center; font-size:13px; color:#cbd5f5;"></div>
    </div>

    <div class="gif-wrap" style="display:flex; justify-content:center; margin-top:12px;">
      <img id="exercise-gif" src="" alt="Exercice" style="width:100%; max-width:360px; border-radius:16px; box-shadow:0 18px 45px rgba(0,0,0,0.9); display:none;">
    </div>

    <p id="round-info" style="text-align:center; font-size:13px; color:#9ca3af; margin-top:8px;"></p>

    <div class="session-controls" style="text-align:center; margin-top:12px;">
      <button class="btn btn-primary" onclick="startTimer()">â–¶ Start</button>
      <button class="btn btn-ghost" onclick="pauseTimer()">â¸ Pause</button>
      <button class="btn btn-ghost" onclick="resetTimer()">ğŸ” Reset</button>
      <button class="btn btn-ghost" onclick="nextExercise()">â¡ï¸ Suivant</button>
      <button class="btn btn-ghost" style="background:#b91c1c; border-color:#ef4444;" onclick="quit()">â›” Quitter</button>
    </div>
  </section>

  <footer>Forge & Fit Â© 2025 â€” Mode sÃ©ance guidÃ©e.</footer>
</div>

<script>
/* ========= PROGRAMMES COMPLETS ========= */
const programs = {
  fullbody: [
    {name:"Burpees", time:30, group:"Full body", gif:"https://media.tenor.com/riJx-wQjzHAAAAAC/burpees.gif"},
    {name:"Squat Jump", time:30, group:"Jambes", gif:"https://media.tenor.com/4M5wFZMOmcoAAAAd/squat-jump.gif"},
    {name:"Mountain climber", time:30, group:"Core", gif:"https://media.tenor.com/4I7nEKeosxwAAAAC/mountain-climber.gif"}
  ],
  pecs: [
    {name:"Pompes", time:30, group:"Pectoraux", gif:"https://media.tenor.com/FZfq0NvKcSMAAAAC/pushups-push-up.gif"},
    {name:"Pompes larges", time:30, group:"Pectoraux extÃ©rieurs", gif:"https://media.tenor.com/uq5IgR9JvoUAAAAC/push-up.gif"},
    {name:"Pompes dÃ©clinÃ©es", time:30, group:"Haut des pectoraux", gif:"https://media.tenor.com/tcL5BkxvYzoAAAAC/decline-push-up.gif"}
  ],
  dos: [
    {name:"Superman", time:30, group:"Bas du dos", gif:"https://media.tenor.com/rf4WuHBqzJwAAAAC/superman-exercise.gif"},
    {name:"Row Ã©lastique", time:30, group:"Dos", gif:"https://media.tenor.com/Bp4Pmx6z1f4AAAAC/resistance-band-row.gif"},
    {name:"Reverse snow angels", time:30, group:"Haut du dos", gif:"https://media.tenor.com/8N47JQs-WcsAAAAC/snow-angels.gif"}
  ],
  jambes: [
    {name:"Squats", time:30, group:"Jambes", gif:"https://media.tenor.com/nuB_7n1HULIAAAAC/squat.gif"},
    {name:"Fentes", time:30, group:"Quadriceps", gif:"https://media.tenor.com/nDPZxEXzxG4AAAAC/lunges.gif"},
    {name:"Sauts groupÃ©s", time:30, group:"ExplosivitÃ©", gif:"https://media.tenor.com/nr8bAvFpC98AAAAC/jump-squat.gif"}
  ],
  epaules: [
    {name:"Ã‰lÃ©vations latÃ©rales", time:30, group:"Ã‰paules", gif:"https://media.tenor.com/2Yy7G7Ew4E0AAAAd/lateral-raise.gif"},
    {name:"Pike push-ups", time:30, group:"Ã‰paules / Triceps", gif:"https://media.tenor.com/s7G8fLZyJx0AAAAC/pike-push-up.gif"},
    {name:"Cercles de bras", time:30, group:"Ã‰chauffement Ã©paules", gif:"https://media.tenor.com/BPC1ZWvS8sEAAAAC/arm-circles.gif"}
  ],
  bras: [
    {name:"Dips chaise", time:30, group:"Triceps", gif:"https://media.tenor.com/1zYHchnHiYMAAAAC/tricep-dips.gif"},
    {name:"Curl Ã©lastique", time:30, group:"Biceps", gif:"https://media.tenor.com/pmjHtkobaNQAAAAC/bicep-curl.gif"},
    {name:"Pompes triceps", time:30, group:"Triceps", gif:"https://media.tenor.com/O7IhiHBpjzAAAAAC/close-grip-pushups.gif"}
  ],
  abdos: [
    {name:"Crunch", time:30, group:"Abdos haut", gif:"https://media.tenor.com/WsMul0R8RPMAAAAC/crunches.gif"},
    {name:"RelevÃ©s de jambes", time:30, group:"Bas des abdos", gif:"https://media.tenor.com/QI0RvrRZtNQAAAAC/leg-raises.gif"},
    {name:"Russian twist", time:30, group:"Obliques", gif:"https://media.tenor.com/n9IhplC-EO8AAAAC/russian-twist.gif"}
  ],
  hiit: [
    {name:"Burpees", time:30, group:"Full body", gif:"https://media.tenor.com/riJx-wQjzHAAAAAC/burpees.gif"},
    {name:"High knees", time:30, group:"Cardio", gif:"https://media.tenor.com/jjUZoL4m5UwAAAAd/high-knees.gif"},
    {name:"Jumping jacks", time:30, group:"Cardio global", gif:"https://media.tenor.com/x8v1oCSJzowAAAAC/jumping.gif"}
  ],
  cardio: [
    {name:"High knees", time:30, group:"Cardio", gif:"https://media.tenor.com/jjUZoL4m5UwAAAAd/high-knees.gif"},
    {name:"Jump rope", time:30, group:"Endurance", gif:"https://media.tenor.com/U-wkn-5HnP4AAAAC/jump-rope.gif"},
    {name:"Butt kicks", time:30, group:"Cardio", gif:"https://media.tenor.com/pbVyuk3F7xAAAAAC/butt-kicks.gif"}
  ],
  echauff: [
    {name:"Rotation poignets", time:30, group:"Ã‰chauffement", gif:"https://media.tenor.com/DZtkG3YkRkMAAAAC/warmup.gif"},
    {name:"Rotation hanches", time:30, group:"MobilitÃ©", gif:"https://media.tenor.com/oZ5EKeosxwAAAAC/hip-circle.gif"},
    {name:"Petit jogging sur place", time:30, group:"Ã‰chauffement cardio", gif:"https://media.tenor.com/0g5cDIeEJDQAAAAC/jogging.gif"}
  ],
  stretch: [
    {name:"Stretch quadriceps", time:30, group:"Quadri", gif:"https://media.tenor.com/8qfes2t86CwAAAAC/quadricep-stretch.gif"},
    {name:"Stretch ischios", time:30, group:"Ischios", gif:"https://media.tenor.com/axBnDg-mwWIAAAAC/hamstring-stretch.gif"},
    {name:"Stretch dos", time:30, group:"Dos", gif:"https://media.tenor.com/Zf0dp2PbgGgAAAAC/childs-pose-yoga.gif"}
  ],
  gainage: [
    {name:"Planche", time:30, group:"Core", gif:"https://media.tenor.com/BOZpY4xXHzYAAAAd/plank.gif"},
    {name:"Planche latÃ©rale", time:30, group:"Obliques", gif:"https://media.tenor.com/qYz1D-2v1LQAAAAC/plank-side.gif"},
    {name:"Hollow hold", time:30, group:"Gainage gÃ©nÃ©ral", gif:"https://media.tenor.com/Ken7KM2SleYAAAAC/hollow.gif"}
  ],
  fessiers: [
    {name:"Hip thrust", time:30, group:"Fessiers", gif:"https://media.tenor.com/8NkrkKQ_EZcAAAAC/hip-thrust.gif"},
    {name:"Donkey kicks", time:30, group:"Fessiers", gif:"https://media.tenor.com/5uRkEXIMGVUAAAAC/donkey-kicks.gif"},
    {name:"Fire hydrants", time:30, group:"Fessiers / Hanches", gif:"https://media.tenor.com/6mMu9q4CPYAAAAAC/fire-hydrant.gif"}
  ]
};

/* ========= VARIABLES ========= */
let current = [];
let indexEx = 0;
let timeLeft = 0;
let interval = null;

let customDuration = null; // durÃ©e perso
let totalRounds = 1;
let currentRound = 1;

/* ========= ELEMENTS ========= */
const timerEl = document.getElementById("timer");
const nameEl = document.getElementById("exercise-name");
const muscleEl = document.getElementById("muscle-group");
const gifEl = document.getElementById("exercise-gif");
const statusEl = document.getElementById("session-status");
const roundInfoEl = document.getElementById("round-info");

/* ========= SON ========= */
function beep(freq = 800, duration = 120) {
  try {
    const Ctx = window.AudioContext || window.webkitAudioContext;
    const ctx = new Ctx();
    const osc = ctx.createOscillator();
    const gain = ctx.createGain();
    osc.frequency.value = freq;
    gain.gain.value = 0.25;
    osc.connect(gain);
    gain.connect(ctx.destination);
    osc.start();
    osc.stop(ctx.currentTime + duration / 1000);
  } catch (e) {
    // pas grave si Ã§a ne marche pas
  }
}

/* ========= FORMAT TEMPS ========= */
function formatTime(t) {
  return "00:" + String(t).padStart(2, "0");
}

/* ========= CHOIX MODE ========= */
function choose(cat) {
  current = programs[cat];
  indexEx = 0;
  currentRound = 1;
  statusEl.textContent = `SÃ©ance : ${cat.toUpperCase()} â€” ${current.length} exercices`;
  pauseTimer();
  loadExercise();
}

/* ========= REGLAGES PERSO ========= */
function updateDuration() {
  const val = document.getElementById("duration-select").value;
  customDuration = val ? parseInt(val, 10) : null;
  if (current.length) {
    resetTimer();
  }
}

function updateRounds() {
  const val = document.getElementById("rounds-select").value;
  totalRounds = parseInt(val, 10) || 1;
  currentRound = 1;
  updateRoundInfo();
}

/* ========= CHARGER EXO ========= */
function loadExercise() {
  if (!current.length) return;
  const ex = current[indexEx];

  const baseTime = ex.time || 30;
  timeLeft = customDuration || baseTime;

  timerEl.textContent = formatTime(timeLeft);
  nameEl.textContent = ex.name;
  muscleEl.textContent = ex.group;
  gifEl.src = ex.gif;
  gifEl.style.display = "block";

  updateRoundInfo();
}

function updateRoundInfo() {
  if (!current.length) {
    roundInfoEl.textContent = "";
    return;
  }
  roundInfoEl.textContent = `Exercice ${indexEx + 1} / ${current.length} â€¢ Tour ${currentRound} / ${totalRounds}`;
}

/* ========= TIMER ========= */
function startTimer() {
  if (!current.length) {
    alert("Choisis d'abord une catÃ©gorie.");
    return;
  }
  if (interval) return;

  beep(900, 120);

  interval = setInterval(() => {
    timeLeft--;
    timerEl.textContent = formatTime(timeLeft);

    if (timeLeft === 3) {
      beep(700, 120);
    }

    if (timeLeft <= 0) {
      beep(400, 200);
      nextExercise();
    }
  }, 1000);
}

function pauseTimer() {
  if (interval) {
    clearInterval(interval);
    interval = null;
  }
}

function resetTimer() {
  pauseTimer();
  if (!current.length) {
    timerEl.textContent = "00:00";
    return;
  }
  const ex = current[indexEx];
  const baseTime = ex.time || 30;
  timeLeft = customDuration || baseTime;
  timerEl.textContent = formatTime(timeLeft);
}

/* ========= NAVIGATION ========= */
function nextExercise() {
  pauseTimer();
  if (!current.length) return;

  indexEx++;
  if (indexEx >= current.length) {
    // fin du tour
    if (currentRound < totalRounds) {
      currentRound++;
      indexEx = 0;
    } else {
      alert("ğŸ”¥ SÃ©ance terminÃ©e !");
      quit();
      return;
    }
  }
  loadExercise();
}

function quit() {
  pauseTimer();
  window.location.href = "index.html";
}
</script>

</body>
</html>

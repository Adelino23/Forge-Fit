<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Forge & Fit ‚Äì S√©ance</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="style.css" />

  <style>
    /* ---- LAYOUT GENERAL DE LA PAGE SEANCE ---- */
    body {
      margin: 0;
      background: radial-gradient(circle at top, #1f1233 0, #05030b 45%, #020105 100%);
      color: #f9fafb;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    h2, h3 {
      margin: 0;
    }

    /* Carte de s√©lection de s√©ance */
    .workout-select {
      max-width: 960px;
      margin: 24px auto 32px;
      padding: 0 16px;
    }

    .workout-card {
      background: radial-gradient(circle at top left, rgba(248,113,113,0.15), rgba(15,23,42,0.98));
      border-radius: 20px;
      padding: 18px 18px 20px;
      border: 1px solid rgba(148,163,184,0.4);
      box-shadow: 0 24px 55px rgba(0,0,0,0.8);
    }

    .workout-card p {
      font-size: 14px;
      color: #e5e7eb;
      margin-top: 6px;
    }

    .pill-row {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 16px;
    }

    .pill-btn {
      border-radius: 999px;
      border: 1px solid rgba(148,163,184,0.5);
      padding: 8px 16px;
      font-size: 14px;
      cursor: pointer;
      background: rgba(15,23,42,0.9);
      color: #e5e7eb;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      transition: .15s ease;
    }

    .pill-btn span {
      font-size: 18px;
    }

    .pill-btn.active,
    .pill-btn:hover {
      border-color: #fb923c;
      background: radial-gradient(circle at top, #f97316, #b91c1c);
      color: #fef2f2;
      box-shadow: 0 12px 25px rgba(248,113,113,0.7);
    }

    .preview-zone {
      margin-top: 16px;
      padding-top: 10px;
      border-top: 1px solid rgba(148,163,184,0.4);
      font-size: 14px;
      display: none;
    }

    .preview-zone button {
      margin-top: 10px;
    }

    /* ---- BOUTONS GENERIQUES ---- */
    .btn {
      border-radius: 999px;
      border: none;
      padding: 10px 18px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      text-decoration: none;
      transition: .15s ease;
    }

    .btn-primary {
      background: linear-gradient(135deg, #ef4444, #f97316);
      color: #fef2f2;
      box-shadow: 0 14px 32px rgba(248,113,113,0.7);
    }
    .btn-primary:hover {
      transform: translateY(-1px);
      box-shadow: 0 18px 40px rgba(248,113,113,0.9);
    }

    .btn-ghost {
      background: rgba(15,23,42,0.92);
      border: 1px solid rgba(148,163,184,0.6);
      color: #e5e7eb;
    }
    .btn-ghost:hover {
      background: rgba(30,64,175,0.9);
    }

    .btn-danger {
      background: #b91c1c;
      color: #fee2e2;
    }

    .btn-small {
      padding: 7px 14px;
      font-size: 13px;
    }

    .btn-row {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
      margin-top: 12px;
    }

    /* ---- FULLSCREEN OVERLAY ---- */
    .workout-overlay {
      position: fixed;
      inset: 0;
      background: radial-gradient(circle at top, #1a1030 0, #05030a 45%, #020105 100%);
      display: none;
      z-index: 999999;
      overflow-y: auto;
      padding: 14px 14px 24px;
    }

    .workout-overlay.active {
      display: block;
    }

    .wo-inner {
      max-width: 520px;
      margin: 0 auto;
    }

    .wo-topline {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 13px;
      color: #e5e7eb;
      margin-bottom: 8px;
    }

    .wo-topline span {
      opacity: .85;
    }

    .wo-close {
      cursor: pointer;
      font-size: 22px;
      opacity: 0.9;
    }

    /* Timer cercle */
    .timer-wrap {
      margin-top: 6px;
      display: flex;
      justify-content: center;
    }

    .timer-circle {
      width: 220px;
      height: 220px;
      border-radius: 50%;
      background:
        radial-gradient(circle at center, #020617 0, #020617 60%, #000 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      box-shadow: 0 20px 45px rgba(0,0,0,0.9);
    }

    .timer-ring {
      position: absolute;
      inset: -6px;
      border-radius: 50%;
      background: conic-gradient(#f97316 0deg, #1f2937 0deg 360deg);
      opacity: 0.95;
    }

    .timer-inner {
      position: relative;
      width: 88%;
      height: 88%;
      border-radius: 50%;
      background: radial-gradient(circle at top, #0f172a 0, #020617 70%);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 4px;
    }

    .timer-text {
      font-size: 36px;
      font-weight: 800;
      letter-spacing: .05em;
    }

    .timer-label {
      font-size: 12px;
      letter-spacing: .15em;
      text-transform: uppercase;
      color: #9ca3af;
    }

    .timer-circle.pulse {
      animation: pulse 0.45s ease-out;
    }

    @keyframes pulse {
      0%   { transform: scale(1); }
      50%  { transform: scale(1.04); }
      100% { transform: scale(1); }
    }

    /* Infos exercice */
    .wo-exo {
      margin-top: 16px;
      text-align: left;
    }

    .wo-exo h2 {
      font-size: 22px;
      margin-bottom: 4px;
    }

    .wo-exo-sub {
      font-size: 14px;
      color: #cbd5f5;
      margin-bottom: 10px;
    }

    .wo-img {
      width: 100%;
      border-radius: 16px;
      object-fit: cover;
      max-height: 240px;
      box-shadow: 0 18px 45px rgba(0,0,0,0.95);
    }

    .wo-desc {
      font-size: 14px;
      color: #e5e7eb;
      margin-top: 10px;
    }

    .wo-meta {
      margin-top: 6px;
      font-size: 13px;
      color: #9ca3af;
    }

    .wo-meta strong {
      color: #f97316;
    }

    .wo-controls {
      margin-top: 16px;
    }

    .wo-hint {
      text-align: center;
      font-size: 11px;
      color: #9ca3af;
      margin-top: 8px;
    }

    @media (max-width: 480px) {
      .timer-circle {
        width: 190px;
        height: 190px;
      }
    }
  </style>
</head>

<body>

<!-- NAV HAUT (identique √† index) -->
<nav>
  <a href="index.html">Accueil</a>
  <a href="prise-masse.html">Prise de masse</a>
  <a href="perte-gras.html">Perte de gras</a>
  <a href="exercices.html">Exercices</a>
  <a href="entrainement.html">S√©ance</a>
  <a href="plan.html">Plan perso</a>
  <a href="compte.html">Mon compte</a>
</nav>

<section class="workout-select">
  <div class="workout-card">
    <h2>S√©ance guid√©e</h2>
    <p>Choisis un groupe musculaire, lance le chrono et encha√Æne les exercices comme dans une vraie application de workout.</p>

    <div class="pill-row">
      <button class="pill-btn" data-type="fullbody" onclick="selectSeance(this, 'fullbody')"><span>üî•</span> Full body</button>
      <button class="pill-btn" data-type="pecs" onclick="selectSeance(this, 'pecs')"><span>üí™</span> Pectoraux</button>
      <button class="pill-btn" data-type="dos" onclick="selectSeance(this, 'dos')"><span>üîµ</span> Dos</button>
      <button class="pill-btn" data-type="jambes" onclick="selectSeance(this, 'jambes')"><span>üü°</span> Jambes</button>
      <button class="pill-btn" data-type="abdos" onclick="selectSeance(this, 'abdos')"><span>üü†</span> Abdos</button>
    </div>

    <div id="preview-zone" class="preview-zone">
      <p id="preview-text"></p>
      <button class="btn btn-primary" onclick="ouvrirFullscreen()">üöÄ Lancer la s√©ance</button>
    </div>
  </div>
</section>

<!-- OVERLAY FULLSCREEN -->
<div id="overlay" class="workout-overlay">
  <div class="wo-inner">

    <div class="wo-topline">
      <span id="wo-top-info">S√©ance</span>
      <div class="wo-close" onclick="fermerFullscreen()">‚úï</div>
    </div>

    <div class="timer-wrap">
      <div id="timerCircle" class="timer-circle">
        <div id="timerRing" class="timer-ring"></div>
        <div class="timer-inner">
          <div id="timerText" class="timer-text">00:30</div>
          <div id="timerLabel" class="timer-label">Pr√™t</div>
        </div>
      </div>
    </div>

    <div class="wo-exo">
      <h2 id="exoNom">Exercice</h2>
      <div id="exoMuscle" class="wo-exo-sub">Muscle cible</div>
      <img id="exoImg" class="wo-img" src="" alt="">
      <p id="exoDesc" class="wo-desc"></p>
      <p id="exoMeta" class="wo-meta"></p>
    </div>

    <div class="wo-controls">
      <div class="btn-row">
        <button class="btn btn-ghost btn-small" onclick="setDuree(30)">30s</button>
        <button class="btn btn-ghost btn-small" onclick="setDuree(45)">45s</button>
        <button class="btn btn-ghost btn-small" onclick="setDuree(60)">60s</button>
      </div>

      <div class="btn-row">
        <button class="btn btn-primary" onclick="startTimer()">‚ñ∂Ô∏è Start</button>
        <button class="btn btn-ghost" onclick="pauseTimer()">‚è∏ Pause</button>
        <button class="btn btn-ghost" onclick="resetTimer()">üîÅ Reset</button>
      </div>

      <div class="btn-row">
        <button class="btn btn-ghost btn-small" onclick="prevExercice()">‚¨ÖÔ∏è Pr√©c√©dent</button>
        <button class="btn btn-ghost btn-small" onclick="nextExercice()">Suivant ‚û°Ô∏è</button>
      </div>
    </div>

    <div class="wo-hint">
      Swipe gauche / droite pour changer d'exercice ‚Ä¢ Vibrations / son √† la fin du timer (si ton t√©l√©phone l'autorise).
    </div>
  </div>
</div>

<footer style="text-align:center;font-size:11px;color:#9ca3af;margin-bottom:8px;">
  Forge & Fit ¬© 2025 ‚Äî Mode s√©ance inspir√© des meilleures apps de workout.
</footer>

<script>
/* ========= DONNEES SEANCES ========= */
const programmes = {
  fullbody: [
    { nom:"Squat", muscle:"Jambes / Fessiers", img:"https://images.pexels.com/photos/2261485/pexels-photo-2261485.jpeg", desc:"Squat contr√¥l√©, dos droit, pousse lourd mais propre.", meta:"4 s√©ries ‚Ä¢ 8‚Äì12 reps" },
    { nom:"D√©velopp√© couch√©", muscle:"Pectoraux", img:"https://images.pexels.com/photos/6456126/pexels-photo-6456126.jpeg", desc:"Barre sur la poitrine, contr√¥le sur la descente, explosif en mont√©e.", meta:"4 s√©ries ‚Ä¢ 6‚Äì10 reps" },
    { nom:"Rowing barre", muscle:"Dos / Biceps", img:"https://images.pexels.com/photos/3823039/pexels-photo-3823039.jpeg", desc:"Tire vers le nombril, √©paules basses, contractions du dos.", meta:"4 s√©ries ‚Ä¢ 8‚Äì12 reps" }
  ],
  pecs: [
    { nom:"D√©velopp√© couch√© barre", muscle:"Pectoraux", img:"https://images.pexels.com/photos/6456170/pexels-photo-6456170.jpeg", desc:"Focus sur la technique, trajectoire stable et contr√¥le.", meta:"4 s√©ries ‚Ä¢ 6‚Äì10 reps" },
    { nom:"D√©velopp√© inclin√© halt√®res", muscle:"Haut des pectoraux", img:"https://images.pexels.com/photos/6455836/pexels-photo-6455836.jpeg", desc:"Monte explosif, descente lente, amplitude compl√®te.", meta:"3 s√©ries ‚Ä¢ 8‚Äì12 reps" },
    { nom:"√âcart√©s halt√®res", muscle:"Pectoraux", img:"https://images.pexels.com/photos/3838385/pexels-photo-3838385.jpeg", desc:"Ouverture large mais contr√¥l√©e, pense √† √©tirer le muscle.", meta:"3 s√©ries ‚Ä¢ 12‚Äì15 reps" }
  ],
  dos: [
    { nom:"Tractions pronation", muscle:"Grand dorsal", img:"https://images.pexels.com/photos/4761355/pexels-photo-4761355.jpeg", desc:"Poitrine vers la barre, pense √† tirer avec le dos, pas les bras.", meta:"4 s√©ries ‚Ä¢ max reps" },
    { nom:"Rowing halt√®re", muscle:"Dos √©paisseur", img:"https://images.pexels.com/photos/6740008/pexels-photo-6740008.jpeg", desc:"Coude pr√®s du corps, contraction forte en haut du mouvement.", meta:"4 s√©ries ‚Ä¢ 8‚Äì12 reps" },
    { nom:"Tirage vertical", muscle:"Dos large", img:"https://images.pexels.com/photos/7676401/pexels-photo-7676401.jpeg", desc:"Tire vers le haut de la poitrine, garde le buste stable.", meta:"3 s√©ries ‚Ä¢ 10‚Äì12 reps" }
  ],
  jambes: [
    { nom:"Presse √† cuisses", muscle:"Quadriceps", img:"https://images.pexels.com/photos/6551175/pexels-photo-6551175.jpeg", desc:"Pieds stables, amplitude contr√¥l√©e, ne verrouille pas totalement les genoux.", meta:"4 s√©ries ‚Ä¢ 10‚Äì15 reps" },
    { nom:"Fentes march√©es", muscle:"Fessiers / Ischios", img:"https://images.pexels.com/photos/6455982/pexels-photo-6455982.jpeg", desc:"Grand pas, plant√© stable, contr√¥le la descente.", meta:"3 s√©ries ‚Ä¢ 10‚Äì12 par jambe" },
    { nom:"Soulev√© de terre roumain", muscle:"Ischios / Bas du dos", img:"https://images.pexels.com/photos/8411305/pexels-photo-8411305.jpeg", desc:"L√©g√®re flexion genoux, pousse les hanches en arri√®re, garde le dos gain√©.", meta:"4 s√©ries ‚Ä¢ 8‚Äì10 reps" }
  ],
  abdos: [
    { nom:"Crunch", muscle:"Abdominaux", img:"https://images.pexels.com/photos/4498291/pexels-photo-4498291.jpeg", desc:"Regarde le plafond, monte en enroulant la colonne, ne tire pas sur la nuque.", meta:"3 s√©ries ‚Ä¢ 15‚Äì20 reps" },
    { nom:"Planche", muscle:"Core", img:"https://images.pexels.com/photos/6456107/pexels-photo-6456107.jpeg", desc:"Corps droit, abdos gain√©s, ne laisse pas tomber les hanches.", meta:"3 √ó 30‚Äì45 sec" },
    { nom:"Relev√©s de jambes", muscle:"Bas des abdos", img:"https://images.pexels.com/photos/4761354/pexels-photo-4761354.jpeg", desc:"Lent vers le bas, contr√¥le total, pas de balancier.", meta:"3 s√©ries ‚Ä¢ 10‚Äì15 reps" }
  ]
};

/* ===== VARIABLES ===== */
let currentType = null;
let exercices = [];
let indexExo = 0;
let dureeTotale = 30; // secondes
let restant = 30;
let timer = null;

/* ELEMENTS */
const previewZone = document.getElementById("preview-zone");
const previewText = document.getElementById("preview-text");
const overlay = document.getElementById("overlay");
const topInfo = document.getElementById("wo-top-info");
const timerCircle = document.getElementById("timerCircle");
const timerRing = document.getElementById("timerRing");
const timerText = document.getElementById("timerText");
const timerLabel = document.getElementById("timerLabel");
const exoNom = document.getElementById("exoNom");
const exoMuscle = document.getElementById("exoMuscle");
const exoImg = document.getElementById("exoImg");
const exoDesc = document.getElementById("exoDesc");
const exoMeta = document.getElementById("exoMeta");

/* ===== UTIL : SON & VIBRATION ===== */
function beep(freq = 750, duration = 120) {
  try {
    const Ctx = window.AudioContext || window.webkitAudioContext;
    const ctx = new Ctx();
    const osc = ctx.createOscillator();
    const gain = ctx.createGain();
    osc.frequency.value = freq;
    gain.gain.value = 0.25;
    osc.connect(gain);
    gain.connect(ctx.destination);
    osc.start();
    osc.stop(ctx.currentTime + duration / 1000);
  } catch (e) {
    // pas grave si le son ne marche pas
  }
}

function vibrate(pattern) {
  if (navigator.vibrate) navigator.vibrate(pattern);
}

/* ===== SELECTION SEANCE ===== */
function selectSeance(btn, type) {
  currentType = type;
  exercices = programmes[type];
  indexExo = 0;

  // style active sur les boutons
  document.querySelectorAll(".pill-btn").forEach(b => b.classList.remove("active"));
  btn.classList.add("active");

  previewZone.style.display = "block";
  previewText.textContent = `S√©ance ${type.toUpperCase()} s√©lectionn√©e ‚Ä¢ ${exercices.length} exercices.`;
}

/* ===== FULLSCREEN ===== */
function ouvrirFullscreen() {
  if (!currentType || !exercices.length) {
    alert("Choisis d'abord une s√©ance.");
    return;
  }

  const elem = document.documentElement;
  if (elem.requestFullscreen) elem.requestFullscreen();

  overlay.classList.add("active");
  topInfo.textContent = `S√©ance ${currentType.toUpperCase()} ‚Ä¢ Exercice ${indexExo+1}/${exercices.length}`;
  afficherExercice();
  resetTimer();
}

function fermerFullscreen() {
  if (document.exitFullscreen) document.exitFullscreen();
  overlay.classList.remove("active");
  pauseTimer();
}

/* ===== AFFICHAGE EXO ===== */
function afficherExercice() {
  const ex = exercices[indexExo];
  exoNom.textContent = ex.nom;
  exoMuscle.textContent = ex.muscle;
  exoImg.src = ex.img;
  exoDesc.textContent = ex.desc;
  exoMeta.innerHTML = `<strong>${ex.meta}</strong>`;
  topInfo.textContent = `S√©ance ${currentType.toUpperCase()} ‚Ä¢ Exercice ${indexExo+1}/${exercices.length}`;
  resetTimer();
}

function nextExercice() {
  if (indexExo < exercices.length - 1) {
    indexExo++;
    beep(650, 120);
    vibrate([40, 40]);
    afficherExercice();
  } else {
    pauseTimer();
    vibrate([100, 60, 100]);
    alert("S√©ance termin√©e üî•");
    fermerFullscreen();
  }
}

function prevExercice() {
  if (indexExo > 0) {
    indexExo--;
    beep(450, 100);
    vibrate(40);
    afficherExercice();
  }
}

/* ===== TIMER ===== */
function setDuree(sec) {
  dureeTotale = sec;
  resetTimer();
}

function startTimer() {
  if (timer) return;
  if (restant <= 0) restant = dureeTotale;

  timerLabel.textContent = "En cours";
  beep(800, 120);
  vibrate(40);

  const start = Date.now() - (dureeTotale - restant) * 1000;

  timer = setInterval(() => {
    const diff = Math.floor((Date.now() - start) / 1000);
    restant = Math.max(dureeTotale - diff, 0);
    updateTimerDisplay();

    // petite animation pulse
    timerCircle.classList.add("pulse");
    setTimeout(() => timerCircle.classList.remove("pulse"), 300);

    if (restant <= 0) {
      pauseTimer();
      timerLabel.textContent = "Termin√©";
      beep(350, 200);
      vibrate([80, 80, 80]);
    }
  }, 1000);
}

function pauseTimer() {
  if (timer) {
    clearInterval(timer);
    timer = null;
    timerLabel.textContent = "Pause";
  }
}

function resetTimer() {
  pauseTimer();
  restant = dureeTotale;
  updateTimerDisplay();
  timerLabel.textContent = "Pr√™t";
}

function updateTimerDisplay() {
  const m = String(Math.floor(restant / 60)).padStart(2, "0");
  const s = String(restant % 60).padStart(2, "0");
  timerText.textContent = `${m}:${s}`;

  const progress = 1 - restant / dureeTotale;
  const deg = progress * 360;
  timerRing.style.background = `conic-gradient(#f97316 0deg ${deg}deg, #111827 ${deg}deg 360deg)`;
}

/* ===== GESTES SWIPE ===== */
let touchStartX = 0;
overlay.addEventListener("touchstart", e => {
  touchStartX = e.changedTouches[0].clientX;
});

overlay.addEventListener("touchend", e => {
  const dx = e.changedTouches[0].clientX - touchStartX;
  if (Math.abs(dx) > 60) {
    if (dx < 0) nextExercice();
    else prevExercice();
  }
});
</script>

</body>
</html>
